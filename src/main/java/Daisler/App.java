/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package Daisler;

//import jdk.internal.org.jline.utils.InputStreamReader;
//import jdk.*;
//import nio.*;

import java.net.*;
import java.util.Date;

import javax.print.attribute.standard.JobKOctetsSupported;

import java.io.*; //webistecontent
import java.io.PrintWriter;
import java.time.LocalDate;//Dates
import java.lang.*;
import org.jsoup.nodes.Document;
//import java.lang.Object;
import org.jsoup.*;
 

public class App{

    public void SaveFile(URL websiteURL, String path) throws IOException{

        String websiteContent = getContent(websiteURL);
        
        contentIntoFile(path, websiteContent);
    }

    private void contentIntoFile(String path, Document s)throws FileNotFoundException, IOException{//Auszugebener Tect in die Datei = out

        Date d = new Date();                //akutelles Datum wird in Datumsklasse erfasst
        String DateString = d.toString();   //Datum wird in String gewandelt
        String title = DateString;          //Titel wird zu Datum
        System.out.println(title);          //for testing 2
        
        System.out.println(path);           //3

        File f = new File(title);// neue Datei mit Datum als name soll erstellt werden

        if (f.createNewFile()){
            System.out.println("Datei generiert: " + f.getName() + DateString);
        }else{
            System.out.println("Datei existiert schon");
        }
        
        FileWriter file = new FileWriter(title);
        file.write(s);
        


        //PrintWriter out = null;

        //out = new PrintWriter(f);

        try {
            //out = new PrintWriter(f);


        }catch (FileNotFoundException e) {
            e.printStackTrace();
            System.out.println("Dateienfehler");

        }

        file.close();
    }

    private Document getContent(URL websiteURL) throws IOException{
        System.out.println(websiteURL);//1
        
        String websiteURLString = websiteURL.toString();//URl of Webiste will be turned into String
        
        Document doc = Jsoup.connect(websiteURLString).get(); // Content from Website will be truned into Document
        
        //Date d = new Date(); 
        //String dateString = d.toString(); // Date will be turned into String for Filename
        //System.out.println(dateString); // for testing
        //String title = dateString;
        //System.out.println(title);//for testing
        return doc; // Document with Content of Website will be returned

    }

    /*
    private String getContent (URL websiteURL) throws IOException{ // Eingeholter Text der Webside 
 
        String newLine = "";
        String text = "";

        try {
            BufferedReader in = new BufferedReader(new InputStreamReader(websiteURL.openStream()));
            System.out.print("Hello World!");

            while (newLine == in.readLine()  != false){
                System.out.print("Hello World!");

                text = text + newLine;
            }
            in.close();

        }catch (FileNotFoundException e) {
            e.printStackTrace();
            System.out.println("Websitefehler");}

            System.out.println(text);//gibt Websitetext aus

            return text;
    }

    */



}